apiVersion: v1
kind: Template

metadata:
  name: phone-ui

parameters:
  - name: APPLICATION_NAME
    value: phone-ui
    required: true
  - name: ROUTE_NAME
    value: game
    required: true
  - name: REPLICAS
    value: "5"
    required: true
  - name: IMAGE_REPOSITORY
    displayName: Image Repository
    value: quay.io/redhatdemo/2020-phone-ui:latest
    required: true
  - name: CONTAINER_REQUEST_CPU
    value: 500m
  - name: CONTAINER_REQUEST_MEMORY
    value: 500Mi
  - name: CONTAINER_LIMIT_CPU
    value: 500m
  - name: CONTAINER_LIMIT_MEMORY
    value: 1000Mi
  - name: PUBLIC_URL
    value: game.sysdeseng.com
  - name: PUBLIC_NAME
    value: game-sysdeseng

objects:
  - apiVersion: v1
    kind: Route
    metadata:
      labels:
        app: ${APPLICATION_NAME}
      name: ${ROUTE_NAME}
    spec:
      port:
        targetPort: 8080
      to:
        kind: Service
        name: ${APPLICATION_NAME}

  - apiVersion: v1
    kind: Route
    metadata:
      labels:
        app: ${APPLICATION_NAME} 
      name: ${PUBLIC_NAME}
    spec:
      host: ${PUBLIC_URL} 
      port:
        targetPort: 8080
      to:
        kind: Service
        name: ${APPLICATION_NAME}
